{"version":3,"file":"js/546.f999892f.js","mappings":"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","sources":["webpack://cellcraft-vue/./src/components/modals/ResultFile.vue","webpack://cellcraft-vue/src/components/modals/ResultFile.vue","webpack://cellcraft-vue/./src/components/modals/ResultFile.vue?de77","webpack://cellcraft-vue/./src/components/modals/ResultFile.vue?cd95"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"result__layout\"},[_c('div',{staticClass:\"result__download-container\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selectedFile),expression:\"selectedFile\"}],staticClass:\"result__file-dropdown\",on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.selectedFile=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"\"}},[_vm._v(\"Please Select Result File\")]),_vm._l((_vm.fileList),function(file){return _c('option',{key:file.name,domProps:{\"value\":file}},[_vm._v(\" \"+_vm._s(file.name)+\" \")])})],2),_c('div',{staticClass:\"result__button\",attrs:{\"data-tooltip\":_vm.selectedFile ? _vm.formatFileSize(_vm.selectedFile.size) : 'Select a file',\"disabled\":!_vm.selectedFile},on:{\"click\":_vm.downloadFile}},[_c('div',{staticClass:\"result__button--wrapper\"},[_c('div',{staticClass:\"result__text\"},[_vm._v(\"Download\")]),_c('span',{staticClass:\"result__icon\"},[_c('svg',{attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"aria-hidden\":\"true\",\"role\":\"img\",\"width\":\"2em\",\"height\":\"2em\",\"preserveAspectRatio\":\"xMidYMid meet\",\"viewBox\":\"0 0 24 24\"}},[_c('path',{attrs:{\"fill\":\"none\",\"stroke\":\"currentColor\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",\"stroke-width\":\"2\",\"d\":\"M12 15V3m0 12l-4-4m4 4l4-4M2 17l.621 2.485A2 2 0 0 0 4.561 21h14.878a2 2 0 0 0 1.94-1.515L22 17\"}})])])])])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"result__layout\">\n        <div class=\"result__download-container\">\n            <select v-model=\"selectedFile\" class=\"result__file-dropdown\">\n                <option value=\"\">Please Select Result File</option>\n                <option v-for=\"file in fileList\" :key=\"file.name\" :value=\"file\">\n                    {{ file.name }}\n                </option>\n            </select>\n\n            <div class=\"result__button\" @click=\"downloadFile\"\n                :data-tooltip=\"selectedFile ? formatFileSize(selectedFile.size) : 'Select a file'\"\n                :disabled=\"!selectedFile\">\n                <div class=\"result__button--wrapper\">\n                    <div class=\"result__text\">Download</div>\n                    <span class=\"result__icon\">\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\" role=\"img\" width=\"2em\" height=\"2em\"\n                            preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 24 24\">\n                            <path fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\"\n                                stroke-width=\"2\"\n                                d=\"M12 15V3m0 12l-4-4m4 4l4-4M2 17l.621 2.485A2 2 0 0 0 4.561 21h14.878a2 2 0 0 0 1.94-1.515L22 17\">\n                            </path>\n                        </svg>\n                    </span>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { getResults, getResult } from \"@/api/index\";\n\nexport default {\n    data() {\n        return {\n            workflowId: this.$route.query.workflow_id,\n            nodeId: this.$route.query.node,\n            algorithmId: null,\n            fileList: [],\n            selectedFile: \"\",\n            customFileName: \"\",\n        };\n    },\n    async mounted() {\n        const current_node = this.$store.getters.getWorkflowNodeInfo(this.nodeId);\n        console.log(current_node.inputs.input_1.connections[0].node);\n        this.algorithmId = current_node.inputs.input_1.connections[0].node;\n        const workflow_result = {\n            id: this.workflowId,\n            algorithm_id: this.algorithmId,\n        }\n        try {\n            const response = await getResults(workflow_result);\n            console.log(response);\n            this.fileList = response.data;\n        } catch (error) {\n            console.log(error);\n        }\n    },\n    methods: {\n        async downloadFile() {\n            try {\n                const workflow_result = {\n                    id: this.workflowId,\n                    algorithm_id: this.algorithmId,\n                    filename: this.selectedFile.name,\n                }\n                const response = await getResult(workflow_result);\n                console.log(response);\n                // 파일을 다운로드하도록 설정\n                const url = window.URL.createObjectURL(new Blob([response.data]));\n                const link = document.createElement('a');\n                link.href = url;\n                link.setAttribute('download', this.selectedFile.name); // 파일 이름 설정\n                document.body.appendChild(link);\n                link.click();\n                document.body.removeChild(link);\n\n                // 메모리 해제\n                window.URL.revokeObjectURL(url);\n            } catch (error) {\n                console.error('Error downloading the file:', error);\n            }\n        },\n        formatFileSize(bytes) {\n            if (bytes === 0) return '0 Bytes';\n            const k = 1024;\n            const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n            const i = Math.floor(Math.log(bytes) / Math.log(k));\n            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n        },\n    }\n}\n</script>\n\n<style>\n.result__layout {\n    width: 100%;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.result__download-container {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background-color: rgb(255, 255, 255);\n    padding: 1rem;\n    border-radius: 1rem;\n}\n\n.result__file-dropdown {\n    margin-right: 10px;\n    padding: 5px;\n}\n\n/* 기존 button 스타일을 대체하는 커스텀 버튼 스타일 */\n.result__button {\n    --width: 100px;\n    --height: 35px;\n    --tooltip-height: 35px;\n    --tooltip-width: 90px;\n    --gap-between-tooltip-to-button: 18px;\n    --button-color: #007BFF;\n    --tooltip-color: #fff;\n    width: var(--width);\n    height: var(--height);\n    background: var(--button-color);\n    position: relative;\n    text-align: center;\n    border-radius: 0.45em;\n    font-family: \"Arial\";\n    transition: background 0.3s;\n    cursor: pointer;\n}\n\n.result__button::before {\n    position: absolute;\n    content: attr(data-tooltip);\n    width: var(--tooltip-width);\n    height: var(--tooltip-height);\n    background-color: var(--tooltip-color);\n    font-size: 0.9rem;\n    color: #111;\n    border-radius: .25em;\n    line-height: var(--tooltip-height);\n    bottom: calc(var(--height) + var(--gap-between-tooltip-to-button) + 10px);\n    left: calc(50% - var(--tooltip-width) / 2);\n}\n\n.result__button::after {\n    position: absolute;\n    content: '';\n    width: 0;\n    height: 0;\n    border: 10px solid transparent;\n    border-top-color: var(--tooltip-color);\n    left: calc(50% - 10px);\n    bottom: calc(100% + var(--gap-between-tooltip-to-button) - 10px);\n}\n\n.result__button::after,\n.result__button::before {\n    opacity: 0;\n    visibility: hidden;\n    transition: all 0.5s;\n}\n\n.result__text {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.result__button-wrapper,\n.result__text,\n.result__icon {\n    overflow: hidden;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    left: 0;\n    color: #fff;\n}\n\n.result__text {\n    top: 0;\n    opacity: 1;\n    visibility: visible;\n}\n\n.result__text,\n.result__icon {\n    transition: all 0.5s;\n}\n\n.result__icon {\n    color: #fff;\n    top: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    opacity: 0;\n    visibility: hidden;\n}\n\n.result__icon svg {\n    width: 24px;\n    height: 24px;\n}\n\n.result__button:hover {\n    background: #6200ff;\n}\n\n.result__button:hover .result__text {\n    top: -100%;\n    opacity: 0;\n    visibility: hidden;\n}\n\n.result__button:hover .result__icon {\n    top: 0;\n    opacity: 1;\n    visibility: visible;\n}\n\n.result__button:hover:before,\n.result__button:hover:after {\n    opacity: 1;\n    visibility: visible;\n}\n\n.result__button:hover:after {\n    bottom: calc(var(--height) + var(--gap-between-tooltip-to-button) - 20px);\n}\n\n.result__button:hover:before {\n    bottom: calc(var(--height) + var(--gap-between-tooltip-to-button));\n}\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ResultFile.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ResultFile.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ResultFile.vue?vue&type=template&id=757aedf1\"\nimport script from \"./ResultFile.vue?vue&type=script&lang=js\"\nexport * from \"./ResultFile.vue?vue&type=script&lang=js\"\nimport style0 from \"./ResultFile.vue?vue&type=style&index=0&id=757aedf1&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","directives","name","rawName","value","selectedFile","expression","on","$event","$$selectedVal","Array","prototype","filter","call","target","options","o","selected","map","val","_value","multiple","attrs","_v","_l","fileList","file","key","domProps","_s","formatFileSize","size","downloadFile","staticRenderFns","data","workflowId","$route","query","workflow_id","nodeId","node","algorithmId","customFileName","mounted","current_node","$store","getters","getWorkflowNodeInfo","console","log","inputs","input_1","connections","workflow_result","id","algorithm_id","response","getResults","error","methods","filename","getResult","url","window","URL","createObjectURL","Blob","link","document","createElement","href","setAttribute","body","appendChild","click","removeChild","revokeObjectURL","bytes","k","sizes","i","Math","floor","parseFloat","pow","toFixed","component"],"sourceRoot":""}