{"version":3,"file":"js/552.1b6ca746.js","mappings":"sKAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,MAAM,CAACE,YAAY,8BAA8B,CAACF,EAAG,SAAS,CAACG,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAUC,MAAOR,EAAIS,aAAcC,WAAW,iBAAiBN,YAAY,wBAAwBO,GAAG,CAAC,OAAS,CAAC,SAASC,GAAQ,IAAIC,EAAgBC,MAAMC,UAAUC,OAAOC,KAAKL,EAAOM,OAAOC,SAAQ,SAASC,GAAG,OAAOA,EAAEC,QAAQ,IAAGC,KAAI,SAASF,GAAG,IAAIG,EAAM,WAAYH,EAAIA,EAAEI,OAASJ,EAAEZ,MAAM,OAAOe,CAAG,IAAIvB,EAAIS,aAAaG,EAAOM,OAAOO,SAAWZ,EAAgBA,EAAc,EAAE,EAAE,SAASD,GAAQZ,EAAI0B,UAAY,EAAE,KAAK,CAACxB,EAAG,SAAS,CAACyB,MAAM,CAAC,MAAQ,KAAK,CAAC3B,EAAI4B,GAAG,+BAA+B5B,EAAI6B,GAAI7B,EAAI8B,UAAU,SAASC,GAAM,OAAO7B,EAAG,SAAS,CAAC8B,IAAID,EAAKzB,KAAK2B,SAAS,CAAC,MAAQF,IAAO,CAAC/B,EAAI4B,GAAG,IAAI5B,EAAIkC,GAAGH,EAAKzB,MAAM,MAAM,KAAI,GAAqB,IAAjBN,EAAI0B,UAAiBxB,EAAG,MAAM,CAACE,YAAY,cAAcO,GAAG,CAAC,MAAQX,EAAImC,UAAU,CAACnC,EAAIoC,GAAG,KAAKlC,EAAG,MAAM,CAACE,YAAY,iBAAiBuB,MAAM,CAAC,eAAe3B,EAAIS,aAAeT,EAAIqC,eAAerC,EAAIS,aAAa6B,MAAQ,gBAAgB,UAAYtC,EAAIS,cAAcE,GAAG,CAAC,MAAQX,EAAIuC,eAAe,CAACrC,EAAG,MAAM,CAACE,YAAY,2BAA2B,CAACF,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACJ,EAAI4B,GAAG,cAAc1B,EAAG,OAAO,CAACE,YAAY,gBAAgB,CAACF,EAAG,MAAM,CAACyB,MAAM,CAAC,MAAQ,6BAA6B,cAAc,OAAO,KAAO,MAAM,MAAQ,MAAM,OAAS,MAAM,oBAAsB,gBAAgB,QAAU,cAAc,CAACzB,EAAG,OAAO,CAACyB,MAAM,CAAC,KAAO,OAAO,OAAS,eAAe,iBAAiB,QAAQ,kBAAkB,QAAQ,eAAe,IAAI,EAAI,gHAClkD,EACIa,EAAkB,CAAC,WAAY,IAAIxC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,wBAAwB,CAACF,EAAG,MAAM,CAACE,YAAY,aAAa,CAACJ,EAAI4B,GAAG,kBACjK,G,oCCoCA,GACAa,IAAAA,GACA,OACAC,WAAA,KAAAC,OAAAC,MAAAC,YACAC,OAAA,KAAAH,OAAAC,MAAAG,KACAC,YAAA,KACAlB,SAAA,GACArB,aAAA,GACAiB,UAAA,GAEA,EACA,aAAAuB,GACA,MAAAC,EAAA,KAAAC,OAAAC,QAAAC,oBAAA,KAAAP,QACAQ,QAAAC,IAAAL,EAAAM,OAAAC,QAAAC,YAAA,GAAAX,MACA,KAAAC,YAAAE,EAAAM,OAAAC,QAAAC,YAAA,GAAAX,KACA,MAAAY,EAAA,CACAC,GAAA,KAAAlB,WACAmB,aAAA,KAAAb,aAEA,IACA,MAAAc,QAAAC,EAAAA,EAAAA,IAAAJ,GACAL,QAAAC,IAAAO,GACA,KAAAhC,SAAAgC,EAAArB,IACA,OAAAuB,GACAV,QAAAC,IAAAS,EACA,CAaA,MAAAC,EAAA,KAAAd,OAAAC,QAAAc,wBAAA,KAAApB,QAEA,QAAAhB,SAAAqC,MAAApC,GAAAA,EAAAzB,OAAA2D,IACA,KAAAxD,aAAAwD,EACA,KAAAvC,UAAAuC,MACA,CACA,MAAAG,EAAAlB,EAAAT,KAAA,SACA,KAAAhC,aAAA,KAAAqB,SAAAuC,MAAAtC,GAAAA,EAAAzB,KAAAgE,SAAAF,KACA,KAAA1C,UAAAuC,EACA,KAAA9B,SACA,CACA,EACAoC,QAAA,CACA,kBAAAhC,GACA,IACA,MAAAoB,EAAA,CACAC,GAAA,KAAAlB,WACAmB,aAAA,KAAAb,YACAwB,SAAA,KAAA/D,aAAAH,MAEAwD,QAAAW,EAAAA,EAAAA,IAAAd,GACAL,QAAAC,IAAAO,GAEA,MAAAY,EAAAC,OAAAC,IAAAC,gBAAA,IAAAC,KAAA,CAAAhB,EAAArB,QACAsC,EAAAC,SAAAC,cAAA,KACAF,EAAAG,KAAAR,EACAK,EAAAI,aAAA,gBAAA1E,aAAAH,MACA0E,SAAAI,KAAAC,YAAAN,GACAA,EAAAO,QACAN,SAAAI,KAAAG,YAAAR,GAGAJ,OAAAC,IAAAY,gBAAAd,EACA,OAAAV,GACAV,QAAAU,MAAA,8BAAAA,EACA,CACA,EACA7B,OAAAA,GACA,KAAAT,UAAA,KAAAjB,aACA,KAAA0C,OAAAsC,OAAA,mBACA7B,GAAA,KAAAd,OACA4C,UAAA,KAAAjF,cAEA,EACA4B,cAAAA,CAAAsD,GACA,OAAAA,EAAA,gBACA,MAAAC,EAAA,KACAC,EAAA,kDACAC,EAAAC,KAAAC,MAAAD,KAAAxC,IAAAoC,GAAAI,KAAAxC,IAAAqC,IACA,OAAAK,YAAAN,EAAAI,KAAAG,IAAAN,EAAAE,IAAAK,QAAA,QAAAN,EAAAC,EACA,IC/HkQ,I,UCQ9PM,GAAY,OACd,EACArG,EACAyC,GACA,EACA,KACA,KACA,MAIF,EAAe4D,EAAiB,O","sources":["webpack://cellcraft-vue/./src/components/modals/ResultFile.vue","webpack://cellcraft-vue/src/components/modals/ResultFile.vue","webpack://cellcraft-vue/./src/components/modals/ResultFile.vue?de77","webpack://cellcraft-vue/./src/components/modals/ResultFile.vue?cd95"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"result__layout\"},[_c('div',{staticClass:\"result__download-container\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selectedFile),expression:\"selectedFile\"}],staticClass:\"result__file-dropdown\",on:{\"change\":[function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.selectedFile=$event.target.multiple ? $$selectedVal : $$selectedVal[0]},function($event){_vm.setupFile = ''}]}},[_c('option',{attrs:{\"value\":\"\"}},[_vm._v(\"Please Select Result File\")]),_vm._l((_vm.fileList),function(file){return _c('option',{key:file.name,domProps:{\"value\":file}},[_vm._v(\" \"+_vm._s(file.name)+\" \")])})],2),(_vm.setupFile == '')?_c('div',{staticClass:\"set__button\",on:{\"click\":_vm.setFile}},[_vm._m(0)]):_c('div',{staticClass:\"result__button\",attrs:{\"data-tooltip\":_vm.selectedFile ? _vm.formatFileSize(_vm.selectedFile.size) : 'Select a file',\"disabled\":!_vm.selectedFile},on:{\"click\":_vm.downloadFile}},[_c('div',{staticClass:\"result__button--wrapper\"},[_c('div',{staticClass:\"result__text\"},[_vm._v(\"Download\")]),_c('span',{staticClass:\"result__icon\"},[_c('svg',{attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"aria-hidden\":\"true\",\"role\":\"img\",\"width\":\"2em\",\"height\":\"2em\",\"preserveAspectRatio\":\"xMidYMid meet\",\"viewBox\":\"0 0 24 24\"}},[_c('path',{attrs:{\"fill\":\"none\",\"stroke\":\"currentColor\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",\"stroke-width\":\"2\",\"d\":\"M12 15V3m0 12l-4-4m4 4l4-4M2 17l.621 2.485A2 2 0 0 0 4.561 21h14.878a2 2 0 0 0 1.94-1.515L22 17\"}})])])])])])])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"set__button--wrapper\"},[_c('div',{staticClass:\"set__text\"},[_vm._v(\"Set up File\")])])\n}]\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"result__layout\">\n        <div class=\"result__download-container\">\n            <select v-model=\"selectedFile\" class=\"result__file-dropdown\" @change=\"setupFile = ''\">\n                <option value=\"\">Please Select Result File</option>\n                <option v-for=\"file in fileList\" :key=\"file.name\" :value=\"file\">\n                    {{ file.name }}\n                </option>\n            </select>\n\n            <div class=\"set__button\" v-if=\"setupFile == ''\" @click=\"setFile\">\n                <div class=\"set__button--wrapper\">\n                    <div class=\"set__text\">Set up File</div>\n                </div>\n            </div>\n\n            <div class=\"result__button\" v-else @click=\"downloadFile\"\n                :data-tooltip=\"selectedFile ? formatFileSize(selectedFile.size) : 'Select a file'\"\n                :disabled=\"!selectedFile\">\n                <div class=\"result__button--wrapper\">\n                    <div class=\"result__text\">Download</div>\n                    <span class=\"result__icon\">\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\" role=\"img\" width=\"2em\" height=\"2em\"\n                            preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 24 24\">\n                            <path fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\"\n                                stroke-width=\"2\"\n                                d=\"M12 15V3m0 12l-4-4m4 4l4-4M2 17l.621 2.485A2 2 0 0 0 4.561 21h14.878a2 2 0 0 0 1.94-1.515L22 17\">\n                            </path>\n                        </svg>\n                    </span>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { getResults, getResult } from \"@/api/index\";\n\nexport default {\n    data() {\n        return {\n            workflowId: this.$route.query.workflow_id,\n            nodeId: this.$route.query.node,\n            algorithmId: null,\n            fileList: [],\n            selectedFile: \"\",\n            setupFile: \"\",\n        };\n    },\n    async mounted() {\n        const current_node = this.$store.getters.getWorkflowNodeInfo(this.nodeId);\n        console.log(current_node.inputs.input_1.connections[0].node);\n        this.algorithmId = current_node.inputs.input_1.connections[0].node;\n        const workflow_result = {\n            id: this.workflowId,\n            algorithm_id: this.algorithmId,\n        }\n        try {\n            const response = await getResults(workflow_result);\n            console.log(response);\n            this.fileList = response.data;\n        } catch (error) {\n            console.log(error);\n        }\n\n        // if (this.fileList.length !== 0) {\n        //     const algorithmNodeInfo = this.$store.getters.getWorkflowNodeInfo(this.algorithmId);\n        //     // algorithmNodeInfo의 data.selectedPluginInputOutput들에서 type이 outputFile이고, activate가 true인 것들만 List로 추출\n        //     const outputFiles = algorithmNodeInfo.data.selectedPluginInputOutput.filter(output => output.type === 'outputFile' && output.activate);\n\n        //     console.log(outputFiles);\n\n        //     // outputFiles 안에 요소들의 name이 fileList의 요소들의 name과 일치하는 것들만 fileList에 남기기\n        //     this.fileList = this.fileList.filter(file => outputFiles.some(outputFile => outputFile.defaultValue === file.name));\n        // }\n\n        const setFileName = this.$store.getters.getWorkflowNodeFileInfo(this.nodeId);\n        // this.fileList 안에 setFileName이 존재하면 selectedFile에 setFileName을 할당\n        if (this.fileList.some(file => file.name === setFileName)) {\n            this.selectedFile = setFileName;\n            this.setupFile = setFileName;\n        } else {\n            const node_title = current_node.data['title'];\n            this.selectedFile = this.fileList.find(file => file.name.includes(node_title));\n            this.setupFile = setFileName;\n            this.setFile();\n        }\n    },\n    methods: {\n        async downloadFile() {\n            try {\n                const workflow_result = {\n                    id: this.workflowId,\n                    algorithm_id: this.algorithmId,\n                    filename: this.selectedFile.name,\n                }\n                const response = await getResult(workflow_result);\n                console.log(response);\n                // 파일을 다운로드하도록 설정\n                const url = window.URL.createObjectURL(new Blob([response.data]));\n                const link = document.createElement('a');\n                link.href = url;\n                link.setAttribute('download', this.selectedFile.name); // 파일 이름 설정\n                document.body.appendChild(link);\n                link.click();\n                document.body.removeChild(link);\n\n                // 메모리 해제\n                window.URL.revokeObjectURL(url);\n            } catch (error) {\n                console.error('Error downloading the file:', error);\n            }\n        },\n        setFile() {\n            this.setupFile = this.selectedFile;\n            this.$store.commit('setWorkflowFile', {\n                id: this.nodeId,\n                file_name: this.selectedFile\n            });\n        },\n        formatFileSize(bytes) {\n            if (bytes === 0) return '0 Bytes';\n            const k = 1024;\n            const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n            const i = Math.floor(Math.log(bytes) / Math.log(k));\n            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n        },\n    }\n}\n</script>\n\n<style>\n.result__layout {\n    width: 100%;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.result__download-container {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background-color: rgb(255, 255, 255);\n    padding: 1rem;\n    border-radius: 1rem;\n}\n\n.result__file-dropdown {\n    margin-right: 10px;\n    padding: 5px;\n}\n\n.set__button {\n    --width: 100px;\n    --height: 35px;\n    --tooltip-height: 35px;\n    --tooltip-width: 90px;\n    --gap-between-tooltip-to-button: 18px;\n    --button-color: #1ac951;\n    --tooltip-color: #fff;\n    width: var(--width);\n    height: var(--height);\n    background: var(--button-color);\n    position: relative;\n    text-align: center;\n    border-radius: 0.45em;\n    font-family: \"Arial\";\n    transition: background 0.3s;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.set__button:hover {\n    background: #0cb843;\n}\n\n.set__button--wrapper {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.set__text {\n    color: #fff;\n}\n\n/* 기존 button 스타일을 대체하는 커스텀 버튼 스타일 */\n.result__button {\n    --width: 100px;\n    --height: 35px;\n    --tooltip-height: 35px;\n    --tooltip-width: 90px;\n    --gap-between-tooltip-to-button: 18px;\n    --button-color: #007BFF;\n    --tooltip-color: #fff;\n    width: var(--width);\n    height: var(--height);\n    background: var(--button-color);\n    position: relative;\n    text-align: center;\n    border-radius: 0.45em;\n    font-family: \"Arial\";\n    transition: background 0.3s;\n    cursor: pointer;\n}\n\n.result__button::before {\n    position: absolute;\n    content: attr(data-tooltip);\n    width: var(--tooltip-width);\n    height: var(--tooltip-height);\n    background-color: var(--tooltip-color);\n    font-size: 0.9rem;\n    color: #111;\n    border-radius: .25em;\n    line-height: var(--tooltip-height);\n    bottom: calc(var(--height) + var(--gap-between-tooltip-to-button) + 10px);\n    left: calc(50% - var(--tooltip-width) / 2);\n}\n\n.result__button::after {\n    position: absolute;\n    content: '';\n    width: 0;\n    height: 0;\n    border: 10px solid transparent;\n    border-top-color: var(--tooltip-color);\n    left: calc(50% - 10px);\n    bottom: calc(100% + var(--gap-between-tooltip-to-button) - 10px);\n}\n\n.result__button::after,\n.result__button::before {\n    opacity: 0;\n    visibility: hidden;\n    transition: all 0.5s;\n}\n\n.result__text,\n.set__text {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.result__button-wrapper,\n.result__text,\n.result__icon {\n    overflow: hidden;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    left: 0;\n    color: #fff;\n}\n\n.result__text {\n    top: 0;\n    opacity: 1;\n    visibility: visible;\n}\n\n.result__text,\n.result__icon {\n    transition: all 0.5s;\n}\n\n.result__icon {\n    color: #fff;\n    top: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    opacity: 0;\n    visibility: hidden;\n}\n\n.result__icon svg {\n    width: 24px;\n    height: 24px;\n}\n\n.result__button:hover {\n    background: #6200ff;\n}\n\n.result__button:hover .result__text {\n    top: -100%;\n    opacity: 0;\n    visibility: hidden;\n}\n\n.result__button:hover .result__icon {\n    top: 0;\n    opacity: 1;\n    visibility: visible;\n}\n\n.result__button:hover:before,\n.result__button:hover:after {\n    opacity: 1;\n    visibility: visible;\n}\n\n.result__button:hover:after {\n    bottom: calc(var(--height) + var(--gap-between-tooltip-to-button) - 20px);\n}\n\n.result__button:hover:before {\n    bottom: calc(var(--height) + var(--gap-between-tooltip-to-button));\n}\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ResultFile.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ResultFile.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ResultFile.vue?vue&type=template&id=c23a7f60\"\nimport script from \"./ResultFile.vue?vue&type=script&lang=js\"\nexport * from \"./ResultFile.vue?vue&type=script&lang=js\"\nimport style0 from \"./ResultFile.vue?vue&type=style&index=0&id=c23a7f60&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","directives","name","rawName","value","selectedFile","expression","on","$event","$$selectedVal","Array","prototype","filter","call","target","options","o","selected","map","val","_value","multiple","setupFile","attrs","_v","_l","fileList","file","key","domProps","_s","setFile","_m","formatFileSize","size","downloadFile","staticRenderFns","data","workflowId","$route","query","workflow_id","nodeId","node","algorithmId","mounted","current_node","$store","getters","getWorkflowNodeInfo","console","log","inputs","input_1","connections","workflow_result","id","algorithm_id","response","getResults","error","setFileName","getWorkflowNodeFileInfo","some","node_title","find","includes","methods","filename","getResult","url","window","URL","createObjectURL","Blob","link","document","createElement","href","setAttribute","body","appendChild","click","removeChild","revokeObjectURL","commit","file_name","bytes","k","sizes","i","Math","floor","parseFloat","pow","toFixed","component"],"sourceRoot":""}