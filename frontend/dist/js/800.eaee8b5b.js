"use strict";(self["webpackChunkcellcraft_vue"]=self["webpackChunkcellcraft_vue"]||[]).push([[800],{3800:function(t,e,s){s.r(e),s.d(e,{default:function(){return h}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"layout_admin"},[e("div",{staticClass:"first-line"},[e("div",{staticClass:"header__text"},[t._v("Files")]),e("div",{staticClass:"search"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchTerm,expression:"searchTerm"}],attrs:{type:"text",placeholder:"Search by title..."},domProps:{value:t.searchTerm},on:{input:function(e){e.target.composing||(t.searchTerm=e.target.value)}}})]),e("div",{staticClass:"page-size"},[e("label",{attrs:{for:"pageSize"}},[t._v("Page Size : ")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.pageSize,expression:"pageSize"}],attrs:{id:"pageSize"},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.pageSize=e.target.multiple?s:s[0]},t.updatePage]}},[e("option",{attrs:{value:"5"}},[t._v("5")]),e("option",{attrs:{value:"10"}},[t._v("10")]),e("option",{attrs:{value:"15"}},[t._v("15")])])])]),e("table",[e("thead",[e("tr",[e("th",[t._v("types")]),e("th",{on:{click:function(e){return t.sortTable("name")}}},[t._v(" title "),e("span",{staticClass:"sort-icon"},[t._v(t._s(t.sortIcon("name")))])]),e("th",{on:{click:function(e){return t.sortTable("size")}}},[t._v(" size "),e("span",{staticClass:"sort-icon"},[t._v(t._s(t.sortIcon("size")))])]),e("th",{on:{click:function(e){return t.sortTable("username")}}},[t._v(" username "),e("span",{staticClass:"sort-icon"},[t._v(t._s(t.sortIcon("username")))])]),e("th",[t._v("File URL")]),e("th",[t._v("Actions")])])]),e("tbody",t._l(t.displayeddatasets,(function(s){return e("tr",{key:s.no},[e("td",[t._v(t._s(s.type))]),e("td",[t._v(t._s(s.name))]),e("td",[t._v(t._s(s.size))]),e("td",[t._v(t._s(s.username))]),e("td",[e("a",{attrs:{href:s.url}},[t._v("View File")])]),e("td",[e("button",{staticClass:"table-button delete",on:{click:function(e){return t.deleteFile(s)}}},[t._v(" Delete ")])])])})),0)]),e("div",{staticClass:"pagination"},[e("button",{attrs:{disabled:1===t.currentPage},on:{click:t.prevPage}},[t._v("Prev")]),e("span",[t._v(t._s(t.currentPage)+" / "+t._s(t.totalPages))]),e("button",{attrs:{disabled:t.currentPage===t.totalPages},on:{click:t.nextPage}},[t._v(" Next ")])])])},r=[],i=s(6098);function n(t,e=2){if(0===t)return"0 Bytes";const s=1024,a=e<0?0:e,r=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(t)/Math.log(s));return parseFloat((t/Math.pow(s,i)).toFixed(a))+" "+r[i]}var o={data(){return{datasets:[],sortKey:"id",sortDirection:"dsc",pageSize:15,currentPage:1,searchTerm:"",totalCount:0}},async created(){await this.fetchFiles()},computed:{sorteddatasets(){const t=[...this.datasets];return this.sortKey&&t.sort(((t,e)=>{let s=t[this.sortKey],a=e[this.sortKey];return"size"===this.sortKey&&(s=this.parseFileSize(s),a=this.parseFileSize(a)),s<a?"asc"===this.sortDirection?-1:1:s>a?"asc"===this.sortDirection?1:-1:0})),t},totalPages(){return Math.ceil(this.totalCount/this.pageSize)},displayeddatasets(){return this.sorteddatasets},filtereddatasets(){if(this.searchTerm){const t=this.searchTerm.toLowerCase();return this.sorteddatasets.filter((e=>e.name.toLowerCase().includes(t)))}return this.sorteddatasets}},methods:{async fetchFiles(){try{const[t,e]=await Promise.all([(0,i.Rh)({amount:this.pageSize,page_num:this.currentPage,sort:this.sortKey,order:this.sortDirection,searchTerm:this.searchTerm}),(0,i.jT)()]);this.datasets=t.data.data.map((t=>({id:t.id,type:t.file_name.split(".").pop(),name:t.file_name,size:n(t.file_size),url:t.file_path,username:t.username}))),this.totalCount=e.data}catch(t){console.error("Error fetching files:",t)}},async sortTable(t){this.sortKey===t?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortKey=t,this.sortDirection="asc"),await this.fetchFiles()},sortIcon(t){return this.sortKey===t?"asc"===this.sortDirection?"▽▲":"▼△":"▽△"},async updatePage(){this.currentPage=1,await this.fetchFiles()},async deleteFile(t){if(confirm(`Are you sure you want to delete file ${t.name}?`))try{await(0,i.Ww)(t.id),await this.fetchFiles()}catch(e){console.error("Error deleting file:",e)}},async prevPage(){this.currentPage>1&&(this.currentPage--,await this.fetchFiles())},async nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,await this.fetchFiles())},parseFileSize(t){const e={B:1,KB:1024,MB:1048576,GB:1073741824,TB:1099511627776},s=t.match(/^([\d.]+)\s*([A-Za-z]+)$/);if(s){const t=parseFloat(s[1]),a=s[2].toUpperCase();return t*(e[a]||1)}return 0}},watch:{searchTerm:{handler:"updatePage",immediate:!1},pageSize:{handler:"updatePage",immediate:!1}}},c=o,l=s(1656),u=(0,l.A)(c,a,r,!1,null,"c74df360",null),h=u.exports}}]);
//# sourceMappingURL=800.eaee8b5b.js.map