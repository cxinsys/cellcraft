"use strict";(self["webpackChunkcellcraft_vue"]=self["webpackChunkcellcraft_vue"]||[]).push([[72],{9072:function(e,t,s){s.r(t),s.d(t,{default:function(){return l}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"layout_admin"},[t("div",{staticClass:"first-line"},[t("div",{staticClass:"header__text"},[e._v("Users")]),t("div",{staticClass:"search"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchTerm,expression:"searchTerm"}],attrs:{type:"text",placeholder:"Search by keyword..."},domProps:{value:e.searchTerm},on:{input:function(t){t.target.composing||(e.searchTerm=t.target.value)}}})]),t("div",{staticClass:"page-size"},[t("label",{attrs:{for:"pageSize"}},[e._v("Page Size : ")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.pageSize,expression:"pageSize"}],attrs:{id:"pageSize"},on:{change:[function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.pageSize=t.target.multiple?s:s[0]},e.resetPageNum]}},[t("option",{attrs:{value:"5"}},[e._v("5")]),t("option",{attrs:{value:"10"}},[e._v("10")]),t("option",{attrs:{value:"15"}},[e._v("15")])])])]),t("table",[t("thead",[t("tr",[t("th",{staticStyle:{width:"70px"},on:{click:function(t){return e.sortTable("id")}}},[e._v(" id "),t("span",{staticClass:"sort-icon"},[e._v(e._s(e.sortIcon("id")))])]),t("th",{on:{click:function(t){return e.sortTable("username")}}},[e._v(" name "),t("span",{staticClass:"sort-icon"},[e._v(e._s(e.sortIcon("username")))])]),t("th",{on:{click:function(t){return e.sortTable("email")}}},[e._v(" e-mail "),t("span",{staticClass:"sort-icon"},[e._v(e._s(e.sortIcon("email")))])]),t("th",[e._v("Actions")])])]),t("tbody",e._l(e.users,(function(s){return t("tr",{key:s.id},[t("td",[e._v(e._s(s.id))]),t("td",[e.editingUser===s.id?t("input",{directives:[{name:"model",rawName:"v-model",value:s.username,expression:"user.username"}],domProps:{value:s.username},on:{input:function(t){t.target.composing||e.$set(s,"username",t.target.value)}}}):t("span",[e._v(e._s(s.username))])]),t("td",[e.editingUser===s.id?t("input",{directives:[{name:"model",rawName:"v-model",value:s.email,expression:"user.email"}],domProps:{value:s.email},on:{input:function(t){t.target.composing||e.$set(s,"email",t.target.value)}}}):t("span",[e._v(e._s(s.email))])]),t("td",[e.editingUser===s.id?t("button",{staticClass:"table-button",on:{click:function(t){return e.saveUser(s)}}},[e._v(" Save ")]):t("button",{staticClass:"table-button",on:{click:function(t){return e.editUser(s)}}},[e._v(" Edit ")]),t("button",{staticClass:"table-button delete",on:{click:function(t){return e.deleteUser(s)}}},[e._v(" Delete ")])])])})),0)]),t("div",{staticClass:"pagination"},[t("button",{attrs:{disabled:1===e.currentPage},on:{click:e.prevPage}},[e._v("Prev")]),t("span",[e._v(e._s(e.currentPage)+" / "+e._s(e.totalPages))]),t("button",{attrs:{disabled:e.currentPage===e.totalPages},on:{click:e.nextPage}},[e._v(" Next ")])])])},r=[],i=s(6098),n={data(){return{users:[],sortKey:"id",sortDirection:"asc",pageSize:15,currentPage:1,searchTerm:"",totalCount:0,editingUser:null}},async mounted(){await this.updateUsers()},computed:{totalPages(){return Math.ceil(this.totalCount/this.pageSize)}},methods:{async updateUsers(){try{const e={amount:this.pageSize,page_num:this.currentPage,sort:this.sortKey,order:this.sortDirection,searchTerm:this.searchTerm},[t,s]=await Promise.all([(0,i.S6)(e),(0,i.oL)()]);this.users=t.data,this.totalCount=s.data}catch(e){console.error("Error fetching users:",e)}},async sortTable(e){this.sortKey===e?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortKey=e,this.sortDirection="asc"),await this.updateUsers()},sortIcon(e){return this.sortKey===e?"asc"===this.sortDirection?"▽▲":"▼△":"▽△"},resetPageNum(){this.currentPage=1,this.updateUsers()},editUser(e){this.editingUser=e.id},async saveUser(e){try{await(0,i.updateUser)(e.id,{username:e.username,email:e.email}),this.editingUser=null,await this.updateUsers()}catch(t){console.error("Error updating user:",t)}},async deleteUser(e){if(confirm(`Are you sure you want to delete user ${e.username}?`))try{await(0,i.deleteUser)(e.id),await this.updateUsers()}catch(t){console.error("Error deleting user:",t)}},async prevPage(){this.currentPage>1&&(this.currentPage--,await this.updateUsers())},async nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,await this.updateUsers())}},watch:{searchTerm:{handler:function(){this.currentPage=1,this.updateUsers()},immediate:!1},pageSize:{handler:function(){this.currentPage=1,this.updateUsers()},immediate:!1}}},o=n,c=s(1656),u=(0,c.A)(o,a,r,!1,null,"77424a36",null),l=u.exports}}]);
//# sourceMappingURL=72.2b269cfe.js.map