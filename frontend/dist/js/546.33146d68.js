"use strict";(self["webpackChunkcellcraft_vue"]=self["webpackChunkcellcraft_vue"]||[]).push([[546],{8546:function(e,t,o){o.r(t),o.d(t,{default:function(){return c}});var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"result__layout"},[t("div",{staticClass:"result__download-container"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedFile,expression:"selectedFile"}],staticClass:"result__file-dropdown",on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedFile=t.target.multiple?o:o[0]}}},[t("option",{attrs:{value:""}},[e._v("Please Select Result File")]),e._l(e.fileList,(function(o){return t("option",{key:o.name,domProps:{value:o}},[e._v(" "+e._s(o.name)+" ")])}))],2),t("div",{staticClass:"result__button",attrs:{"data-tooltip":e.selectedFile?e.formatFileSize(e.selectedFile.size):"Select a file",disabled:!e.selectedFile},on:{click:e.downloadFile}},[t("div",{staticClass:"result__button--wrapper"},[t("div",{staticClass:"result__text"},[e._v("Download")]),t("span",{staticClass:"result__icon"},[t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",role:"img",width:"2em",height:"2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"}},[t("path",{attrs:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15V3m0 12l-4-4m4 4l4-4M2 17l.621 2.485A2 2 0 0 0 4.561 21h14.878a2 2 0 0 0 1.94-1.515L22 17"}})])])])])])])},i=[],s=(o(4603),o(7566),o(8721),o(6098)),n={data(){return{workflowId:this.$route.query.workflow_id,nodeId:this.$route.query.node,algorithmId:null,fileList:[],selectedFile:"",customFileName:""}},async mounted(){const e=this.$store.getters.getWorkflowNodeInfo(this.nodeId);console.log(e.inputs.input_1.connections[0].node),this.algorithmId=e.inputs.input_1.connections[0].node;const t={id:this.workflowId,algorithm_id:this.algorithmId};try{const e=await(0,s.h1)(t);console.log(e),this.fileList=e.data}catch(o){console.log(o)}},methods:{async downloadFile(){try{const e={id:this.workflowId,algorithm_id:this.algorithmId,filename:this.selectedFile.name},t=await(0,s.uj)(e);console.log(t);const o=window.URL.createObjectURL(new Blob([t.data])),l=document.createElement("a");l.href=o,l.setAttribute("download",this.selectedFile.name),document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(o)}catch(e){console.error("Error downloading the file:",e)}},formatFileSize(e){if(0===e)return"0 Bytes";const t=1024,o=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],l=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,l)).toFixed(2))+" "+o[l]}}},a=n,r=o(1656),d=(0,r.A)(a,l,i,!1,null,null,null),c=d.exports}}]);
//# sourceMappingURL=546.33146d68.js.map