"use strict";(self["webpackChunkcellcraft_vue"]=self["webpackChunkcellcraft_vue"]||[]).push([[163],{4163:function(e,t,i){i.r(t),i.d(t,{default:function(){return c}});var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"result__layout"},[t("div",{staticClass:"result__download-container"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedFile,expression:"selectedFile"}],staticClass:"result__file-dropdown",on:{change:[function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedFile=t.target.multiple?i:i[0]},function(t){e.setupFile=""}]}},[t("option",{attrs:{value:""}},[e._v("Please Select Result File")]),e._l(e.fileList,(function(i){return t("option",{key:i.name,domProps:{value:i}},[e._v(" "+e._s(i.name)+" ")])}))],2),""==e.setupFile?t("div",{staticClass:"set__button",on:{click:e.setFile}},[e._m(0)]):t("div",{staticClass:"result__button",attrs:{"data-tooltip":e.selectedFile?e.formatFileSize(e.selectedFile.size):"Select a file",disabled:!e.selectedFile},on:{click:e.downloadFile}},[t("div",{staticClass:"result__button--wrapper"},[t("div",{staticClass:"result__text"},[e._v("Download")]),t("span",{staticClass:"result__icon"},[t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",role:"img",width:"2em",height:"2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"}},[t("path",{attrs:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15V3m0 12l-4-4m4 4l4-4M2 17l.621 2.485A2 2 0 0 0 4.561 21h14.878a2 2 0 0 0 1.94-1.515L22 17"}})])])])])])])},s=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"set__button--wrapper"},[t("div",{staticClass:"set__text"},[e._v("Set up File")])])}],o=(i(4603),i(7566),i(8721),i(6098)),n={data(){return{workflowId:this.$route.query.workflow_id,nodeId:this.$route.query.node,algorithmId:null,fileList:[],selectedFile:"",setupFile:""}},async mounted(){const e=this.$store.getters.getWorkflowNodeInfo(this.nodeId);console.log(e.inputs.input_1.connections[0].node),this.algorithmId=e.inputs.input_1.connections[0].node;const t={id:this.workflowId,algorithm_id:this.algorithmId};try{const e=await(0,o.h1)(t);console.log(e),this.fileList=e.data}catch(l){console.log(l)}if(0!==this.fileList.length){const e=this.$store.getters.getWorkflowNodeInfo(this.algorithmId),t=e.data.selectedPluginInputOutput.filter((e=>"outputFile"===e.type&&e.activate));console.log(t),this.fileList=this.fileList.filter((e=>t.some((t=>t.defaultValue===e.name))))}const i=this.$store.getters.getWorkflowNodeFileInfo(this.nodeId);if(this.fileList.some((e=>e.name===i)))this.selectedFile=i,this.setupFile=i;else{const t=e.data["title"];this.selectedFile=this.fileList.find((e=>e.name===t)),this.setupFile=i,this.setFile()}},methods:{async downloadFile(){try{const e={id:this.workflowId,algorithm_id:this.algorithmId,filename:this.selectedFile.name},t=await(0,o.uj)(e);console.log(t);const i=window.URL.createObjectURL(new Blob([t.data])),l=document.createElement("a");l.href=i,l.setAttribute("download",this.selectedFile.name),document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(i)}catch(e){console.error("Error downloading the file:",e)}},setFile(){this.setupFile=this.selectedFile,this.$store.commit("setWorkflowFile",{id:this.nodeId,file_name:this.selectedFile})},formatFileSize(e){if(0===e)return"0 Bytes";const t=1024,i=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],l=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,l)).toFixed(2))+" "+i[l]}}},a=n,r=i(1656),d=(0,r.A)(a,l,s,!1,null,null,null),c=d.exports}}]);
//# sourceMappingURL=163.7e6521b1.js.map