"use strict";(self["webpackChunkcellcraft_vue"]=self["webpackChunkcellcraft_vue"]||[]).push([[253],{7253:function(t,e,s){s.r(e),s.d(e,{default:function(){return u}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"layout_admin"},[e("div",{staticClass:"first-line"},[e("div",{staticClass:"header__text"},[t._v("Tasks")]),e("div",{staticClass:"search"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchTerm,expression:"searchTerm"}],attrs:{type:"text",placeholder:"Search by username..."},domProps:{value:t.searchTerm},on:{input:function(e){e.target.composing||(t.searchTerm=e.target.value)}}})]),e("div",{staticClass:"page-size"},[e("label",{attrs:{for:"pageSize"}},[t._v("Page Size : ")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.pageSize,expression:"pageSize"}],attrs:{id:"pageSize"},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.pageSize=e.target.multiple?s:s[0]},t.updatePage]}},[e("option",{attrs:{value:"5"}},[t._v("5")]),e("option",{attrs:{value:"10"}},[t._v("10")]),e("option",{attrs:{value:"15"}},[t._v("15")])])])]),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{width:"70px"},on:{click:function(e){return t.sortTable("no")}}},[t._v(" No. "),e("span",{staticClass:"sort-icon"},[t._v(t._s(t.sortIcon("no")))])]),e("th",{on:{click:function(e){return t.sortTable("username")}}},[t._v(" Username "),e("span",{staticClass:"sort-icon"},[t._v(t._s(t.sortIcon("username")))])]),e("th",{on:{click:function(e){return t.sortTable("workflowTitle")}}},[t._v(" Workflow Title "),e("span",{staticClass:"sort-icon"},[t._v(t._s(t.sortIcon("workflowTitle")))])]),e("th",{on:{click:function(e){return t.sortTable("status")}}},[t._v(" status "),e("span",{staticClass:"sort-icon"},[t._v(t._s(t.sortIcon("status")))])]),e("th",{on:{click:function(e){return t.sortTable("time")}}},[t._v(" submitted time "),e("span",{staticClass:"sort-icon"},[t._v(t._s(t.sortIcon("time")))])])])]),e("tbody",t._l(t.displayedJobs,(function(s){return e("tr",{key:s.no},[e("td",[t._v(t._s(s.no))]),e("td",[t._v(t._s(s.username))]),e("td",[t._v(t._s(s.workflowTitle))]),e("td",{class:s.status.replace(" ","-").toLowerCase()},[t._v(" "+t._s(s.status)+" ")]),e("td",[t._v(t._s(s.time))])])})),0)]),e("div",{staticClass:"pagination"},[e("button",{attrs:{disabled:1===t.currentPage},on:{click:t.prevPage}},[t._v("Prev")]),e("span",[t._v(t._s(t.currentPage)+" / "+t._s(t.totalPages))]),e("button",{attrs:{disabled:t.currentPage===t.totalPages},on:{click:t.nextPage}},[t._v("Next")])])])},r=[],i=s(6098),o={data(){return{jobs:[],sortKey:"id",sortDirection:"dsc",pageSize:15,currentPage:1,searchTerm:"",searchProject:"",totalCount:0}},async created(){await this.fetchTasks()},computed:{sortedJobs(){return this.jobs},totalPages(){return Math.ceil(this.totalCount/this.pageSize)},displayedJobs(){return this.jobs}},methods:{async fetchTasks(){try{const t={amount:this.pageSize,page_num:this.currentPage,sort:this.sortKey,order:"asc"===this.sortDirection?"asc":"desc",searchTerm:this.searchTerm},[e,s]=await Promise.all([(0,i.gK)(t),(0,i.c0)()]);this.jobs=e.data.data.map(((t,e)=>({no:e+1,id:t.id,userId:t.user_id,username:t.username,workflowId:t.workflow_id,workflowTitle:t.workflow_title,status:t.status,time:new Date(t.start_time).toLocaleDateString()}))),this.totalCount=s.data}catch(t){console.error("Error fetching tasks:",t)}},async sortTable(t){this.sortKey===t?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortKey=t,this.sortDirection="asc"),this.currentPage=1,await this.fetchTasks()},sortIcon(t){return this.sortKey===t?"asc"===this.sortDirection?"▽▲":"▼△":"▽△"},async prevPage(){this.currentPage>1&&(this.currentPage--,await this.fetchTasks())},async nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,await this.fetchTasks())},async updatePage(){this.currentPage=1,await this.fetchTasks()}},watch:{searchTerm:{handler:"updatePage",immediate:!1},pageSize:{handler:"updatePage",immediate:!1}}},n=o,c=s(1656),l=(0,c.A)(n,a,r,!1,null,"115a56fd",null),u=l.exports}}]);
//# sourceMappingURL=253.bc68a114.js.map