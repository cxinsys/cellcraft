"use strict";(self["webpackChunkcellcraft_vue"]=self["webpackChunkcellcraft_vue"]||[]).push([[23],{6023:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"layout_admin"},[e("div",{staticClass:"first-line"},[e("div",{staticClass:"header__text"},[t._v("Workflows")]),e("div",{staticClass:"search"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchTerm,expression:"searchTerm"}],attrs:{type:"text",placeholder:"Search by title..."},domProps:{value:t.searchTerm},on:{input:function(e){e.target.composing||(t.searchTerm=e.target.value)}}})]),e("div",{staticClass:"page-size"},[e("label",{attrs:{for:"pageSize"}},[t._v("Page Size : ")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.pageSize,expression:"pageSize"}],attrs:{id:"pageSize"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.pageSize=e.target.multiple?a:a[0]},t.updatePage]}},[e("option",{attrs:{value:"5"}},[t._v("5")]),e("option",{attrs:{value:"10"}},[t._v("10")]),e("option",{attrs:{value:"15"}},[t._v("15")])])])]),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{width:"70px"},on:{click:function(e){return t.sortTable("id")}}},[t._v(" id "),e("span",{staticClass:"sort-icon"},[t._v(t._s(t.sortIcon("id")))])]),e("th",{on:{click:function(e){return t.sortTable("title")}}},[t._v(" title "),e("span",{staticClass:"sort-icon"},[t._v(t._s(t.sortIcon("title")))])]),e("th",{on:{click:function(e){return t.sortTable("username")}}},[t._v(" username "),e("span",{staticClass:"sort-icon"},[t._v(t._s(t.sortIcon("username")))])]),e("th",{on:{click:function(e){return t.sortTable("updated_at")}}},[t._v(" updated date "),e("span",{staticClass:"sort-icon"},[t._v(t._s(t.sortIcon("updated_at")))])]),e("th",[t._v("Actions")])])]),e("tbody",t._l(t.workflows,(function(a){return e("tr",{key:a.id},[e("td",[t._v(t._s(a.id))]),e("td",[t._v(t._s(a.title))]),e("td",[t._v(t._s(a.username))]),e("td",[t._v(t._s(new Date(a.updated_at).toLocaleDateString()))]),e("td",[e("button",{staticClass:"table-button delete",on:{click:function(e){return t.deleteWorkflow(a)}}},[t._v(" Delete ")])])])})),0)]),e("div",{staticClass:"pagination"},[e("button",{attrs:{disabled:1===t.currentPage},on:{click:t.prevPage}},[t._v("Prev")]),e("span",[t._v(t._s(t.currentPage)+" / "+t._s(t.totalPages))]),e("button",{attrs:{disabled:t.currentPage===t.totalPages},on:{click:t.nextPage}},[t._v(" Next ")])])])},r=[],o=a(6098),i={data(){return{workflows:[],sortKey:"id",sortDirection:"asc",pageSize:10,currentPage:1,searchTerm:"",totalCount:0}},async created(){await this.fetchWorkflows()},computed:{totalPages(){return Math.ceil(this.totalCount/this.pageSize)}},methods:{async fetchWorkflows(){try{const t={amount:this.pageSize,page_num:this.currentPage,sort:this.sortKey,order:"asc"===this.sortDirection?"asc":"desc",searchTerm:this.searchTerm},[e,a]=await Promise.all([(0,o.c_)(t),(0,o.i7)()]);this.workflows=e.data.data,this.totalCount=a.data}catch(t){console.error("Error fetching workflows:",t)}},async sortTable(t){this.sortKey===t?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortKey=t,this.sortDirection="asc"),await this.fetchWorkflows()},sortIcon(t){return this.sortKey===t?"asc"===this.sortDirection?"▽▲":"▼△":"▽△"},async updatePage(){this.currentPage=1,await this.fetchWorkflows()},async deleteWorkflow(t){if(confirm(`Are you sure you want to delete workflow ${t.title}?`))try{await(0,o.Cd)(t.id),await this.fetchWorkflows()}catch(e){console.error("Error deleting workflow:",e)}},async prevPage(){this.currentPage>1&&(this.currentPage--,await this.fetchWorkflows())},async nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,await this.fetchWorkflows())}},watch:{searchTerm:{handler:"updatePage",immediate:!1},pageSize:{handler:"updatePage",immediate:!1}}},n=i,c=a(1656),l=(0,c.A)(n,s,r,!1,null,"bcb40b74",null),u=l.exports}}]);
//# sourceMappingURL=23.c41032d4.js.map